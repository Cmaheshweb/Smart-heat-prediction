@app.get("/alerts-screen", response_class=HTMLResponse)
def alerts_screen():
    return """
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta http-equiv="refresh" content="15">
<title>Alert History</title>

<style>
body {
  background:#020617;
  color:#e5e7eb;
  font-family:Arial;
  padding:20px;
}
.alert {
  background:#111827;
  padding:14px;
  border-left:6px solid red;
  margin-bottom:12px;
  border-radius:8px;
}
.GREEN { border-color:#4ade80 }
.YELLOW { border-color:#fde047 }
.ORANGE { border-color:#fb923c }
.RED { border-color:#f87171 }
.CRITICAL {
  border-color:#ef4444;
  animation: blink 1s infinite;
}
@keyframes blink {
  0% { opacity:1 }
  50% { opacity:0.4 }
  100% { opacity:1 }
}
</style>
</head>

<body>
<h1>ðŸš¨ Alert History</h1>
<div id="alerts">Loading...</div>

<script>
fetch('/api/alerts/history')
.then(r => r.json())
.then(d => {
  let html = '';
  d.alerts.forEach(a => {
    html += `
      <div class="alert ${a.severity}">
        <b>${a.state}</b> | HIT ${a.hit}%<br>
        Severity: ${a.severity}<br>
        Time: ${a.time}
      </div>
    `;
  });
  document.getElementById('alerts').innerHTML =
    html || '<p>No alerts yet</p>';
})
.catch(err => {
  document.getElementById('alerts').innerHTML =
    '<p style="color:red">Failed to load alerts</p>';
});
</script>

</body>
</html>
"""