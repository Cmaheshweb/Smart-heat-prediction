<!DOCTYPE html>
<html>
<head>
<meta http-equiv="refresh" content="10">
<title>Alert History</title>

<style>
body {
  background:#020617;
  color:#e5e7eb;
  font-family:Inter, Arial;
  padding:24px;
}

h1 { color:#f87171 }

.alert {
  background:#111827;
  padding:14px;
  border-left:6px solid;
  border-radius:10px;
  margin-bottom:14px;
}

.GREEN { border-color:#4ade80 }
.YELLOW { border-color:#fde047 }
.ORANGE { border-color:#fb923c }
.RED { border-color:#f87171 }
.CRITICAL {
  border-color:#ef4444;
  animation: blink 1s infinite;
}

@keyframes blink {
  0%{opacity:1}
  50%{opacity:0.5}
  100%{opacity:1}
}

.meta {
  color:#94a3b8;
  font-size:13px;
}
</style>
</head>

<body>

<h1>ðŸš¨ Alert History</h1>
<div id="alerts">Loadingâ€¦</div>

<script>
fetch('/api/alerts/history')
.then(r=>r.json())
.then(d=>{
  let html='';
  d.alerts.forEach(a=>{
    html+=`
      <div class="alert ${a.severity}">
        <b>${a.state}</b> | HIT ${a.hit}%<br>
        <div class="meta">
          Severity: ${a.severity}<br>
          Time: ${a.time}
        </div>
      </div>`;
  });
  document.getElementById('alerts').innerHTML =
    html || '<p>No alerts yet</p>';
});
</script>

</body>
</html>