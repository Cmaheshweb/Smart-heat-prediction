<!DOCTYPE html>
<html>
<head>
<meta http-equiv="refresh" content="10">
<title>Live Server Status</title>

<style>
:root {
  --bg: #020617;
  --card: #111827;
  --border: #1e293b;
  --text: #e5e7eb;
}

body {
  background: var(--bg);
  color: var(--text);
  font-family: Inter, Arial, sans-serif;
  padding: 24px;
}

h1 {
  color: #38bdf8;
  margin-bottom: 16px;
}

.card {
  background: var(--card);
  padding: 20px;
  border-radius: 14px;
  border: 3px solid var(--border);
  max-width: 520px;
  transition: all 0.3s ease;
}

.label {
  color: #94a3b8;
  font-weight: 600;
}

.value {
  font-weight: 700;
}

.GREEN { color:#4ade80 }
.YELLOW { color:#fde047 }
.ORANGE { color:#fb923c }
.RED { color:#f87171 }
.CRITICAL { color:#ef4444 }

.CRITICAL-BLINK {
  animation: blink 1s infinite;
  border-color: #ef4444;
  box-shadow: 0 0 18px #ef4444;
}

@keyframes blink {
  0% { opacity:1 }
  50% { opacity:0.4 }
  100% { opacity:1 }
}
</style>
</head>

<body>

<h1>ðŸ–¥ Live Server Status</h1>

<div id="card" class="card">Loadingâ€¦</div>

<script>
fetch('/api/live-status')
.then(r => r.json())
.then(d => {
  const card = document.getElementById("card");
  card.className = "card";

  if (d.severity === "CRITICAL") {
    card.classList.add("CRITICAL-BLINK");
  }

  card.innerHTML = `
    <p><span class="label">Server:</span> <span class="value">${d.server_id}</span></p>
    <p><span class="label">Hit:</span> <span class="value">${d.hit}%</span></p>
    <p><span class="label">State:</span> <span class="value ${d.severity}">${d.state}</span></p>
    <p><span class="label">Severity:</span> <span class="value ${d.severity}">${d.severity}</span></p>
    <p><span class="label">Freeze:</span> <span class="value">${d.freeze}</span></p>
    <p><span class="label">Actions:</span> ${d.actions.join(', ')}</p>
  `;
});
</script>

</body>
</html>